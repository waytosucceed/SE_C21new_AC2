
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="./assets/Logo_last.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playwrite+MX:wght@100..400&display=swap" rel="stylesheet" />
    <title>Activity_2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            /* background-color: #678923; */
            /* min-height: 100vh; */
            background: url("assets/Backgrounds.png");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            object-fit: cover;
min-height: 100vh;
        }

       #heading {
             text-align: center;
            background-color: whitesmoke;
            padding: 10px 20px; /* Increased padding: 15px top/bottom, 40px left/right */
            margin: 10px auto; /* Changed to auto for centering */
            color: black;
            font-size: 2em;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            width: fit-content; /* Changed from 40% to fit-content */
            border-radius: 10px; /* Added some border radius for better appearance */
        }

        .activity {
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            gap: 20px;
            height: auto;
        }

        .sidebar {
            width: 100px;
            height: fit-content;
            max-height: 65vh;
            overflow-y: auto;
        }

        .sidebar h3 {
            color: white;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .questionButtons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .qBtn {
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            background-color: #f5f5f5; /* Grayish white background */
            color: black;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            width: 85%;
            text-align: center;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.8); /* Dark shadow bottom right */
            position: relative;
        }

        .qBtn:hover {
            background-color: #e8e8e8;
            transform: translateY(-1px);
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.7);
        }

        .qBtn.active {
            background-color: #f5f5f5;
            box-shadow: none; /* Remove shadow when active */
            border: 3px solid #000; /* Dark black outline */
            transform: translateY(2px); /* Pressed effect */
        }

        .qBtn:active {
            box-shadow: none;
            border: 3px solid #000;
            transform: translateY(2px);
        }

        .mainContent {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .backGroundMainDiv {
            position: relative;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            min-height: 500px;
            flex: 1;
        }

        #backgroundImage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            opacity: 0.05;
            z-index: 1;
        }

        .questionContent {
            position: relative;
            z-index: 2;
        }

        .questionText {
            font-size: 2em;
            margin-bottom: 30px;
            color: #333;
            text-align: center;
            line-height: 1.4;
        }

        .middleSection {
            display: flex;
            gap: 40px;
            align-items: flex-start;
            min-height: 350px;
        }

        .imageSection {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .questionImg {
            max-width: 100%;
            max-height: 300px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .optionsSection {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .optionGrid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .optionBtn {
            padding: 20px;
            border: 3px solid #ddd;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.6em;
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-word;
            position: relative;
        }

        .optionBtn:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .optionBtn.correct {
            background: #d4edda;
            border-color: #4CAF50;
            color: #155724;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .optionBtn.incorrect {
            background: #f8d7da;
            border-color: #f44336;
            color: #721c24;
            box-shadow: 0 8px 25px rgba(244, 67, 54, 0.4);
        }

        .optionImage {
            max-width: 250px;
            max-height: 250px;
            object-fit: contain;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .optionBtn.image-option {
            min-height: 250px;
            padding: 15px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
        }

        .optionBtn.image-option:hover {
            background: linear-gradient(145deg, #f8f9ff, #e8e9ff);
        }

        .optionBtn.image-option.correct {
            background: linear-gradient(145deg, #d4edda, #c3e6cb);
        }

        .optionBtn.image-option.incorrect {
            background: linear-gradient(145deg, #f8d7da, #f1c2c7);
        }

        /* Input field styles */
        .inputGrid {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
        }

        .inputContainer {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 400px;
        }

        .inputLabel {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            min-width: 80px;
        }

        .answerInput {
            flex: 1;
            padding: 15px 20px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            text-align: center;
            transition: all 0.3s ease;
            background: white;
        }

        /* Inline input styles for questions */
        .inline-input {
            display: inline-block;
            width: 80px;
            /* padding: 8px 12px; */
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.2em;
            text-align: center;
            margin: 0 5px;
            background: white;
            transition: all 0.3s ease;
        }

        .inline-input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        .inline-input.correct {
            border-color: #4CAF50;
            background: #d4edda;
            color: #155724;
        }

        .inline-input.incorrect {
            border-color: #f44336;
            background: #f8d7da;
            color: #721c24;
        }

        .answerInput:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .answerInput.correct {
            border-color: #4CAF50;
            background: #d4edda;
            color: #155724;
        }

        .answerInput.incorrect {
            border-color: #f44336;
            background: #f8d7da;
            color: #721c24;
        }

        .checkBtn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        .checkBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .feedbackText {
            font-size: 1.2em;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            min-height: 30px;
        }

        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .nextBtn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .nextBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
        }

        .finalScreen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 400px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border-radius: 20px;
            color: white;
            font-size: 2em;
            text-align: center;
        }

        .finalImage {
            max-width: 300px;
            border-radius: 15px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .activity {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                width: 100%;
                max-height: 150px;
                margin-bottom: 20px;
            }

            .questionButtons {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }

            .qBtn {
                width: auto;
                min-width: 50px;
            }

            .middleSection {
                flex-direction: row;
                gap: 20px;
            }

            .questionText {
                font-size: 1.2em;
            }

            .optionGrid {
                grid-template-rows: 1fr 1fr;
                gap: 15px;
            }

            .optionBtn {
                font-size: 1em;
                padding: 15px;
                min-height: 100px;
            }

            .optionBtn.image-option {
                min-height: 120px;
            }

            .optionImage {
                max-width: 200px;
                max-height: 200px;
            }

            .inputContainer {
                flex-direction: column;
                text-align: center;
            }

            .inputLabel {
                min-width: auto;
            }

            .inline-input {
                width: 60px;
                font-size: 1em;
            }
        }

        .optionGrid.three-options {
            grid-template-columns: 1fr 1fr;
        }

        .optionGrid.three-options .optionBtn:nth-child(3) {
            grid-column: 1 / -1;
        }

        .optionGrid.one-option {
            grid-template-columns: 1fr;
        }

        .optionGrid.has-images {
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .optionGrid.has-images .optionBtn {
            min-height: 160px;
            padding: 20px;
        }

        .optionGrid.has-images .optionImage {
            max-width: 260px;
            max-height: 160px;
        }

        @media (max-width: 768px) {
            .optionGrid.has-images {
                grid-template-columns: 1fr;
            }

            .optionGrid.has-images .optionBtn {
                min-height: 140px;
            }
        }

        .fraction-container {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            vertical-align: middle;
        }

        .whole-number {
            font-size: 1em;
        }

        .fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            vertical-align: middle;
            font-size: 1em;
        }

        .numerator,
        .denominator {
            line-height: 1;
            padding: 2px 4px;
        }

        .fraction-line {
            width: 100%;
            height: 2px;
            background-color: currentColor;
            margin: 2px 0;
        }

        .questionText .fraction-container {
            margin: 0 4px;
        }

        .optionBtn .fraction-container {
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="header" style="
      width: auto;
      box-shadow: 5px 5px 10px rgb(0, 0, 0);
      padding-bottom: 10px;
      background-color: white;
    ">
        <img src="./assets/Logo.png" width="5%" style="float: left; margin-top: 25px; text-align: left"
            class="img-responsive" />
        <span>
            <img src="./assets/header.png" width="30%" height="" class="img-responsive" style="text-align: left" />
        </span>
    </div>
<div>
            <p id="heading">Introduction to Proportion</p>
    </div>
    

    <div class="activity">
        <!-- Left Sidebar with Question Buttons -->
        <div class="sidebar">
            <div class="questionButtons" id="questionButtons"></div>
        </div>

        <!-- Main Content Area -->
        <div class="mainContent">
            <div class="backGroundMainDiv">
                <div id="questionContent" class="questionContent"></div>

                <div class="finalScreen" id="finalScreen" style="display:none;">
                    <div>
                        <h2>🎉 Well Done!</h2>
                        <p>You've completed all questions!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentIndex = 0;
        let selectedAnswer = null;
        let userInputs = [];
        let data = [
  {
    "questionNo": "Q1",
    "question": [
      "Do the ratios 3:7 and 12:28 form a proportion?"
    ],
    "options": ["Yes", "No"],
    "correct": 0
  },
  {
    "questionNo": "Q2",
    "question": [
      "Comment on whether the following two ratios are in proportion or not:<br> 1.5 apples : 2.5 apples <br> 4.5 kg : 7.6 kg"
    ],
    "options": ["Yes", "No"],
    "correct": 1
  },
  {
    "questionNo": "Q3",
    "question": [
      "There are two ratios 1.5 : 2.5 and 3.6 : 6.0, are they in the same proportion?"
    ],
    "options": ["Yes", "No"],
    "correct": 0
  },
  {
    "questionNo": "Q4",
    "question": [
      "Do the ratios 7, 49, 343 form a continued proportion?"
    ],
    "options": ["Yes", "No"],
    "correct": 0
  },
  {
    "questionNo": "Q5",
    "question": [
      "Do the numbers 1.2, 2.4, and 5.0 form a continued proportion?"
    ],
    "options": ["Yes", "No"],
    "correct": 1
  },
  {
    "questionNo": "Q6",
    "question": ["Write the missing number in the proportion:<br> 8 : 12 :: 10 : _____"],
    "input": [""],
    "correct": ["15"]
  },
  {
    "questionNo": "Q7",
    "question": ["Write the missing number in the proportion<br>",{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 2
                        }
                    }," : ",{
                        "fraction": {
                            "whole": "",
                            "numerator": "_____",
                            "denominator": "_____"
                        }
                    }, " :: ",{
                        "fraction": {
                            "whole": "",
                            "numerator": 2,
                            "denominator": 3
                        }
                    }, " : ",,{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 5
                        }
                    }],
    "input": ["",""],
    "correct": ["3","20"]
  },
  {
    "questionNo": "Q8",
    "question": ["Find the value of 'm' in the proportion:<br>",{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 2
                        }
                    }," : <b>m</b>", " :: ",{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 3
                        }
                    }, " : ",{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 5
                        }
                    },"<br>",{
                        "fraction": {
                            "whole": "",
                            "numerator": "_____",
                            "denominator": "_____"
                        }
                    }],
    "input": ["",""],
    "correct": ["1", "20"]
  },
  {
    "questionNo": "Q9",
    "question": [" If 7 : y :: 35 : 55, find the value of y<br> _____"],
    "input": [""],
    "correct": ["11"]
  },
  {
    "questionNo": "Q10",
    "question": ["Find the value of 'y' in the proportion:<br>3.6 : 0.6 :: y : 0.5<br> _____"],
    "input": [""],
    "correct": ["3"]
  },
  {
    "questionNo": "Q11",
    "question": ["In the given  proportion, write the value of the missing mean..<br>4, _____, 16"],
    "input": [""],
    "correct": ["8"]
  },
  {
    "questionNo": "Q12",
    "question": ["The mean proportional of 6 and 24 is<br> _____"],
    "input": [""],
    "correct": ["12"]
  },
  {
    "questionNo": "Q13",
    "question": ["The mean proportional between 5 and 20 is<br> _____"],
    "input": [""],
    "correct": ["10"]
  },
  {
    "questionNo": "Q14",
    "question": ["If 7 and 28 are in continued proportion, find the mean proportional.<br> _____"],
    "input": [""],
    "correct": ["14"]
  },
  {
    "questionNo": "Q15",
    "question": ["Write the fourth proportional to 2.5, 1.5, 3.5<br> _____._____"],
    "input": ["",""],
    "correct": ["2","1"]
  },
  {
    "questionNo": "Q16",
    "question": [" Find the third proportion to 4 and 12.<br> _____"],
    "input": [""],
    "correct": ["36"]
  },
  {
    "questionNo": "Q17",
    "question": ["Find the third proportional to ",{
                        "fraction": {
                            "whole": "5",
                            "numerator": 1,
                            "denominator": 4
                        }
                    }," , 7.<br>",
                {
                        "fraction": {
                            "whole": "",
                            "numerator": "_____",
                            "denominator": "_____"
                        }
                    }],
    "input": ["",""],
    "correct": ["28","3"]
  },
  {
    "questionNo": "Q18",
    "question": ["Find the fourth proportional to ",{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 3
                        }
                    },", ",,{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 5
                        }
                    }, ", and ",
                ,{
                        "fraction": {
                            "whole": "",
                            "numerator": 1,
                            "denominator": 6
                        }
                    },"<br>",
                {
                        "fraction": {
                            "whole": "",
                            "numerator": "_____",
                            "denominator": "_____"
                        }
                    }],
    "input": ["",""],
    "correct": ["1","10"]
  },
  {
    "questionNo": "Q19",
    "question": [
      "The second, third and fourth terms of a proportion are 27, 35, and 63. Find the first term."
    ],
    "options": ["15", "18", "20", "12"],
    "correct": 0
  },
  {
    "questionNo": "Q20",
    "question": [
      "In a proportion, the product of the extremes is 225. If one of the means is 15, find the other mean."
    ],
    "options": ["20", "12", "15", "30"],
    "correct": 2
  },
  {
    "questionNo": "Q21",
    "question": [
      "In a photography contest, the ratio of entries from Asia and Europe is 18 to 54. If Africa sent 6 entries, how many entries should South America send to keep the proportion?"
    ],
    "options": ["12", "10", "16", "18"],
    "correct": 3
  },
  {
    "questionNo": "Q22",
    "question": [
      "If a tree grows 2 m in year one and 4 m in year two, what would be the expected height in year three, keeping the same proportion?"
    ],
    "options": ["10", "8", "6", "4"],
    "correct": 1
  },
  {
    "questionNo": "Q23",
    "question": [
      "In a recipe, 4 tablespoons of flour are used with 3 tablespoons of sugar. If a second batch uses 6 tablespoons of sugar, how much flour is needed to keep the ratio?"
    ],
    "options": ["5", "6", "4.5", "3"],
    "correct": 2
  },
  {
    "questionNo": "Q25",
    "question": [
      "A factory produced 16 units and then 36 units over two months. What should be the third month's output to keep the same growth pattern?"
    ],
    "options": ["81", "64", "78", "90"],
    "correct": 0
  },
  {
    "questionNo": "Q26",
    "question": [
      "If 4 books cost $28, how much will 20 books cost?"
    ],
    "options": ["$140", "$120", "$150", "$130"],
    "correct": 0
  },
  {
    "questionNo": "Q27",
    "question": [
      "A school library has a ratio of science books to social studies books equal to the ratio of social studies books to math books. If there are 450 science books and 300 social studies books, how many math books are there?"
    ],
    "options": ["180", "150", "200", "24"],
    "correct": 2
  },
  {
    "questionNo": "Q28",
    "question": [
      "A scale drawing represents 3.5 meters as 14 cm. How many centimeters will represent 5.25 meters?"
    ],
    "options": ["20 cm", "18 cm", "19.5 cm", "21 cm"],
    "correct": 3
  },
  {
    "questionNo": "Q29",
    "question": [
      "If 2.5 kg of rice costs $105, what is the cost of 750 grams of rice?"
    ],
    "options": ["$28", "$31.50", "$30.92", "$25.93"],
    "correct": 1
  },
  {
    "questionNo": "Q30",
    "question": [
      "A car travels 90 km in 1 hour 30 minutes. At the same speed, how far will it travel in 2 hours 45 minutes?"
    ],
    "options": ["150 km", "160 km", "165 km", "170 km"],
    "correct": 2
  },
  {
    "questionNo": "Q31",
    "question": [
      "A map is drawn to a scale of 1 cm representing 5 km. If two cities are 8 cm apart on the map, what is the actual distance between them?"
    ],
    "options": ["40 km", "60 km", "80 km", "160 km"],
    "correct": 0
  },
  {
    "questionNo": "Q32",
    "question": [
      "A map is drawn to a scale of 1cm : 250000 cm. If two towns are 4 cm apart on the map, what is the actual distance between them in kilometers?"
    ],
    "options": ["1 km", "10 km", "100 km", "1000 km"],
    "correct": 1
  },
  {
    "questionNo": "Q33",
    "question": [
      "In a library, there are 3 bookshelves for every 10 tables. How many bookshelves are needed if there are 50 tables in the library?"
    ],
    "options": ["10", "12", "15", "18"],
    "correct": 2
  },
  {
    "questionNo": "Q34",
    "question": [
      "A tree casts a shadow of 6.5 meters. A meter stick (1 meter tall) casts a shadow of 1.3 meters at the same time. How tall is the tree?"
    ],
    "options": ["3.25 meters", "7 meters", "8.45 meters", "5 meters"],
    "correct": 3
  },
  {
    "questionNo": "Q35",
    "question": [
      "A pole casts a shadow of 10 m, while a lamp post of height 2 m casts a shadow of 1.25 m. What is the height of the pole?"
    ],
    "options": ["14 m", "15.5 m", "16 m", "16.2 m"],
    "correct": 2
  }
]


        window.onload = () => {
            renderButtons();
            renderQuestion();
        };

        function renderButtons() {
            const container = document.getElementById('questionButtons');
            container.innerHTML = '';
            data.forEach((item, index) => {
                const btn = document.createElement('button');
                btn.innerText = item.questionNo;
                btn.className = 'qBtn' + (index === currentIndex ? ' active' : '');
                btn.onclick = () => {
                    currentIndex = index;
                    selectedAnswer = null;
                    userInputs = [];
                    renderQuestion();
                };
                container.appendChild(btn);
            });
            setTimeout(() => {
                const activeBtn = container.querySelector('.qBtn.active');
                if (activeBtn) {
                    activeBtn.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
            }, 100);
        }

        function processQuestionContent(questionContent) {
            if (typeof questionContent === 'string') {
                return questionContent;
            }

            if (Array.isArray(questionContent)) {
                return questionContent.map(item => {
                    if (typeof item === 'string') {
                        return item;
                    } else if (item.fraction) {
                        return renderFraction(item.fraction);
                    }
                    return '';
                }).join('');
            }

            return questionContent;
        }

        function renderFraction(fractionObj) {
            const { whole, numerator, denominator } = fractionObj;

            let html = '<span class="fraction-container">';

            if (whole && whole > 0) {
                html += `<span class="whole-number">${whole}</span>`;
            }

            if (numerator && denominator) {
                html += `<span class="fraction">
                    <span class="numerator">${numerator}</span>
                    <span class="fraction-line"></span>
                    <span class="denominator">${denominator}</span>
                </span>`;
            }

            html += '</span>';
            return html;
        }

        function renderQuestion() {
            const questionContent = document.getElementById('questionContent');
            const finalScreen = document.getElementById('finalScreen');
            const questionButtons = document.getElementById('questionButtons');

            if (currentIndex >= data.length) {
                questionContent.style.display = 'none';
                questionButtons.style.display = 'none';
                finalScreen.style.display = 'flex';
                return;
            }

            const q = data[currentIndex];

            // Process question content
            let questionText = processQuestionContent(q.question);
            
            // For input questions, replace _____ with input fields
            if (q.input) {
                let inputIndex = 0;
                questionText = questionText.replace(/_____/g, () => {
                    return `<input type="text" class="inline-input" id="input_${inputIndex++}" placeholder="" />`;
                });
            }

            let html = `<h3 class='questionText'>${questionText}</h3>`;
            html += `<div class='middleSection'>`;

            // Left side - Image
            if (q.image) {
                html += `<div class="imageSection">
                            <img src="${q.image}" alt="question" class="questionImg"/>
                         </div>`;
            }

            // Right side - Options/Inputs and feedback
            html += `<div class="optionsSection">`;

            // Check if this question has input fields or options
            if (q.input) {
                // For input questions, we've already added the inputs inline in the question text
                html += `<button class="checkBtn" onclick="handleInputCheck()">Submit</button>`;
            } else {
                // Render option buttons (existing logic)
                const hasImages = q.options.some(opt => typeof opt === 'string' && /\.(png|jpe?g|svg)$/i.test(opt));

                let gridClass = 'optionGrid';
                if (hasImages) {
                    gridClass += ' has-images';
                }
                if (q.options.length === 1) {
                    gridClass += ' one-option';
                } else if (q.options.length === 3) {
                    gridClass += ' three-options';
                }

                html += `<div class="${gridClass}">`;

                q.options.forEach((opt, idx) => {
                    const isImage = typeof opt === 'string' && /\.(png|jpe?g|svg)$/i.test(opt);
                    const buttonClass = isImage ? 'optionBtn image-option' : 'optionBtn';
                    html += `<button class="${buttonClass}" onclick="handleOptionClick(${idx})">`;

                    if (isImage) {
                        html += `<img src="assets/${opt}" alt="option-${idx}" class="optionImage"/>`;
                    } else if (opt.fraction) {
                        html += renderFraction(opt.fraction);
                    } else {
                        html += opt;
                    }

                    html += `</button>`;
                });

                html += `</div>`;
            }

            html += `<div style='display:flex'><div style='width:50%'><p class="feedbackText" id="feedbackText"></p></div>
                     <div style='width:50%'><button class="nextBtn" id="nextBtn" style="display:none;" onclick="handleNext()">Next</button></div></div>
                     </div></div>`;

            questionContent.innerHTML = html;
            if (q.input) {
        const placeholders = questionContent.querySelectorAll('.input-placeholder');
        placeholders.forEach((placeholder, idx) => {
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'inline-input';
            input.id = `input_${idx}`;
            input.placeholder = '';
            
            // Style the input to fit inline
            input.style.cssText = `
                display: inline-block;
                width: 80px;
                padding: 2px 6px;
                margin: 0 2px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: inherit;
                font-family: inherit;
                background: white;
                text-align: center;
            `;
            
            placeholder.parentNode.replaceChild(input, placeholder);
        });
    }
            questionContent.style.display = 'block';
            finalScreen.style.display = 'none';
            renderButtons();
        }

        function handleInputCheck() {
            const q = data[currentIndex];
            const feedback = document.getElementById('feedbackText');
            const nextBtn = document.getElementById('nextBtn');
            const checkBtn = document.querySelector('.checkBtn');

            // Collect all input values
            userInputs = [];
            let allCorrect = true;

            for (let i = 0; i < q.input.length; i++) {
                const inputElement = document.getElementById(`input_${i}`);
                const userValue = inputElement.value.trim().toLowerCase();
                userInputs.push(userValue);

                const correctAnswer = q.correct[i].trim().toLowerCase();
                const isCorrect = userValue === correctAnswer;

                if (isCorrect) {
                    inputElement.classList.remove('incorrect');
                    inputElement.classList.add('correct');
                } else {
                    inputElement.classList.remove('correct');
                    inputElement.classList.add('incorrect');
                    allCorrect = false;
                }
            }

            if (allCorrect) {
                feedback.innerHTML = `<span class='emoji'>✅</span> Correct! Great job!`;
                feedback.style.color = '#4CAF50';

                // Disable inputs and check button
                for (let i = 0; i < q.input.length; i++) {
                    document.getElementById(`input_${i}`).disabled = true;
                }
                checkBtn.style.display = 'none';

                nextBtn.innerText = currentIndex + 1 < data.length ? 'Next' : 'Finish';
                nextBtn.style.display = 'block';
            } else {
                feedback.innerHTML = `<span class='emoji'>❌</span> Some answers are incorrect. Try again!`;
                feedback.style.color = '#f44336';
            }
        }


        function handleOptionClick(index) {
            if (selectedAnswer !== null) return; // Prevent multiple selections

            selectedAnswer = index;
            const q = data[currentIndex];
            const feedback = document.getElementById('feedbackText');
            const nextBtn = document.getElementById('nextBtn');
            const optionBtns = document.querySelectorAll('.optionBtn');

            // Disable further selection temporarily
            optionBtns.forEach((btn) => {
                btn.style.pointerEvents = 'none';
            });

            if (index === q.correct) {
                // Highlight selected correct answer
                optionBtns[index].classList.add('correct');

                feedback.innerHTML = `<span class='emoji'>✅</span> Correct! Great job!`;
                feedback.style.color = '#4CAF50';

                nextBtn.innerText = currentIndex + 1 < data.length ? 'Next' : 'Finish';
                nextBtn.style.display = 'block';
            } else {
                // Highlight only incorrect answer clicked
                optionBtns[index].classList.add('incorrect');

                feedback.innerHTML = `<span class='emoji'>❌</span> Try again!`;
                feedback.style.color = '#f44336';

                // Re-enable the buttons so user can try again
                optionBtns.forEach((btn, idx) => {
                    if (idx !== index) {
                        btn.style.pointerEvents = 'auto';
                    }
                });

                // Reset selectedAnswer so user can choose again
                selectedAnswer = null;
            }
        }

        function handleNext() {
            if (currentIndex + 1 < data.length) {
                currentIndex++;
                selectedAnswer = null;
                userInputs = [];
                renderQuestion();
            } else {
                currentIndex++;
                renderQuestion();
            }
        }
    </script>
</body>

</html>
